"use strict";var wsHook={};(function(){function a(a){this.bubbles=a.bubbles||!1,this.cancelBubble=a.cancelBubble||!1,this.cancelable=a.cancelable||!1,this.currentTarget=a.currentTarget||null,this.data=a.data||null,this.defaultPrevented=a.defaultPrevented||!1,this.eventPhase=a.eventPhase||0,this.lastEventId=a.lastEventId||"",this.origin=a.origin||"",this.path=a.path||[],this.ports=a.parts||[],this.returnValue=a.returnValue||!0,this.source=a.source||null,this.srcElement=a.srcElement||null,this.target=a.target||null,this.timeStamp=a.timeStamp||null,this.type=a.type||"message",this.__proto__=a.__proto__||MessageEvent.__proto__}var b=wsHook.before=function(a){return a},c=wsHook.after=function(a){return a},d=wsHook.modifyUrl=function(a){return a};wsHook.resetHooks=function(){wsHook.before=b,wsHook.after=c,wsHook.modifyUrl=d};var e=WebSocket;WebSocket=function(b,c){var d;b=wsHook.modifyUrl(b)||b,this.url=b,this.protocols=c,d=this.protocols?new e(b,c):new e(b);var f=d.send;return d.send=function(a){arguments[0]=wsHook.before(a,d.url,d)||a,f.apply(this,arguments)},d._addEventListener=d.addEventListener,d.addEventListener=function(){var b=this;return"message"===arguments[0]&&(arguments[1]=function(c){return function(){arguments[0]=wsHook.after(new a(arguments[0]),d.url,d),null===arguments[0]||c.apply(b,arguments)}}(arguments[1])),d._addEventListener.apply(this,arguments)},Object.defineProperty(d,"onmessage",{set:function(){var b=this,c=arguments[0],e=function(){arguments[0]=wsHook.after(new a(arguments[0]),d.url,d),null===arguments[0]||c.apply(b,arguments)};d._addEventListener.apply(this,["message",e,!1])}}),d},WebSocket.CONNECTING=e.CONNECTING,WebSocket.OPEN=e.OPEN,WebSocket.CLOSING=e.CLOSING,WebSocket.CLOSED=e.CLOSED})();